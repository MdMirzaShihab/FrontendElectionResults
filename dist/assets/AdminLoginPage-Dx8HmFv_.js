import{a as q,j as e,c as f}from"./index-C_gzxXLR.js";import{u as A,r as s}from"./vendor-react-D5zly3OG.js";import{B as h}from"./Button-CcyT1Mks.js";import{C as p,a as v,b as j,c as b}from"./Card-Ce4z5HAh.js";import{I as M}from"./Input-8els27y-.js";import{K as T,n as k,o as N,p as W,E as $,q as B}from"./vendor-icons-B72874lV.js";import"./vendor-charts-CASEHI2m.js";import"./vendor-state-CPk78qbZ.js";function Y(){const y=A(),{isLoading:c,error:i,login:w,verifyOtp:C,clearError:x}=q(),[m,E]=s.useState("credentials"),[a,S]=s.useState(""),[l,z]=s.useState(""),[o,u]=s.useState(""),[g,R]=s.useState(!1),[n,d]=s.useState(0);s.useEffect(()=>{if(n<=0)return;const t=setInterval(()=>{d(r=>r-1)},1e3);return()=>clearInterval(t)},[n]),s.useEffect(()=>{x()},[m,x]);function I(){if(!a)return"";const[t,r]=a.split("@");return r?`${t.slice(0,2)}${"*".repeat(Math.max(t.length-2,0))}@${r}`:a}async function L(t){if(t.preventDefault(),!a||!l)return;(await w(a,l))?.otpRequired&&(E("otp"),d(60))}async function D(t){if(t.preventDefault(),o.length!==6)return;await C(a,o)&&y("/admin/dashboard")}function O(){n>0||(d(60),u(""))}const P=s.useCallback(t=>{const r=t.target.value.replace(/\D/g,"").slice(0,6);u(r)},[]);return m==="otp"?e.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 bg-sage-50 dark:bg-sage-950",children:e.jsxs(p,{variant:"elevated",className:"w-full max-w-md mx-auto",padding:"lg",children:[e.jsxs(v,{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-12 h-12 rounded-xl bg-gradient-to-br from-green-500 to-green-600 flex items-center justify-center mb-3",children:e.jsx(T,{size:22,className:"text-white"})}),e.jsx(j,{as:"h1",className:"text-xl",children:"Enter Verification Code"}),e.jsxs("p",{className:"text-sm text-olive-500 dark:text-sage-400 mt-1",children:["We've sent a 6-digit code to ",I()]})]}),e.jsx(b,{children:e.jsxs("form",{onSubmit:D,className:"space-y-5",children:[e.jsx("div",{children:e.jsx("input",{type:"text",inputMode:"numeric",autoComplete:"one-time-code",maxLength:6,value:o,onChange:P,placeholder:"000000",className:f("w-full text-center text-3xl font-mono tracking-[0.5em] py-4","bg-sage-50 border border-sage-200 rounded-xl","focus:outline-none focus:ring-2 focus:ring-green-500/50 focus:border-green-500","dark:bg-sage-900 dark:border-sage-700 dark:text-sage-100","dark:focus:border-green-400 dark:focus:ring-green-400/50","placeholder:text-sage-300 dark:placeholder:text-sage-600")})}),i&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-red-600 dark:text-red-400",children:[e.jsx(k,{size:14}),e.jsx("span",{children:i})]}),e.jsx(h,{type:"submit",fullWidth:!0,loading:c,disabled:o.length!==6,children:"Verify Code"}),e.jsx("div",{className:"text-center",children:n>0?e.jsxs("p",{className:"text-sm text-olive-400 dark:text-sage-500",children:["Resend code in ",n,"s"]}):e.jsx("button",{type:"button",onClick:O,className:"text-sm text-green-600 hover:text-green-700 dark:text-green-400 dark:hover:text-green-300 font-medium",children:"Resend code"})}),e.jsx("p",{className:"text-xs text-center text-olive-400 dark:text-sage-500",children:"Demo: Enter any 6 digits"})]})})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 bg-sage-50 dark:bg-sage-950",children:e.jsxs(p,{variant:"elevated",className:"w-full max-w-md mx-auto",padding:"lg",children:[e.jsxs(v,{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-12 h-12 rounded-xl bg-gradient-to-br from-green-500 to-green-600 flex items-center justify-center mb-3",children:e.jsx(N,{size:22,className:"text-white"})}),e.jsx(j,{as:"h1",className:"text-xl",children:"Admin Login"})]}),e.jsx(b,{children:e.jsxs("form",{onSubmit:L,className:"space-y-4",children:[e.jsx(M,{label:"Email",type:"email",value:a,onChange:t=>S(t.target.value),placeholder:"admin@demo.com",leftIcon:W,required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-olive-700 dark:text-sage-300 mb-1.5",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none text-olive-400 dark:text-sage-500",children:e.jsx(N,{size:16})}),e.jsx("input",{type:g?"text":"password",value:l,onChange:t=>z(t.target.value),placeholder:"Enter password",required:!0,className:f("w-full pl-10 pr-10 py-2 text-sm rounded-xl","bg-sage-50 border border-sage-200 text-olive-800 placeholder:text-olive-400","transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-green-500/50 focus:border-green-500","dark:bg-sage-900 dark:border-sage-700 dark:text-sage-100 dark:placeholder:text-sage-500","dark:focus:border-green-400 dark:focus:ring-green-400/50")}),e.jsx("button",{type:"button",onClick:()=>R(t=>!t),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-olive-400 hover:text-olive-600 dark:text-sage-500 dark:hover:text-sage-300",children:g?e.jsx($,{size:16}):e.jsx(B,{size:16})})]})]}),i&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-red-600 dark:text-red-400",children:[e.jsx(k,{size:14}),e.jsx("span",{children:i})]}),e.jsx(h,{type:"submit",fullWidth:!0,loading:c,disabled:!a||!l,children:"Sign In"}),e.jsx("p",{className:"text-xs text-center text-olive-400 dark:text-sage-500",children:"Demo: Use any email and password"})]})})]})})}export{Y as default};
