import{j as e,c as u}from"./index-C_gzxXLR.js";import{r as x}from"./vendor-react-D5zly3OG.js";import{u as V,a as S}from"./useAutoRefresh-C5B4cXPu.js";import{u as w}from"./useSimulation-DNYEKk6A.js";import{f as g,a as p}from"./formatters-DXobJT5u.js";import{C as c,a as f,b,c as N}from"./Card-Ce4z5HAh.js";import{B as P}from"./Badge-CX70jgsv.js";import{S as T,a as j}from"./Skeleton-BlVrmxxX.js";import{L as R}from"./LastUpdatedIndicator-M3ggrZ6i.js";import{V as A,e as L,f as D,g as B,h as z}from"./vendor-icons-B72874lV.js";import{R as k,P as M,a as O,C as y,T as C,B as U,X as I,Y as K,b as _}from"./vendor-charts-CASEHI2m.js";import"./vendor-state-CPk78qbZ.js";function E(){const{overview:t,lastUpdated:r,isLoading:l,error:n,fetchOverview:o}=V(),m=x.useCallback(()=>o(),[o]);return S(m,{interval:3e4}),w(x.useCallback(()=>o(),[o])),{overview:t,lastUpdated:r,isLoading:l,error:n,refresh:m}}const W=[{key:"totalVotes",label:"Total Votes Cast",icon:A,colorClass:"bg-green-100 text-green-600 dark:bg-green-900 dark:text-green-400",getValue:t=>g(t.totalVotesCast)},{key:"seatsDeclared",label:"Seats Declared",icon:L,colorClass:"bg-accent-100 text-accent-600 dark:bg-accent-900 dark:text-accent-400",getValue:t=>`${t.seatsDeclared}/300`},{key:"seatsReporting",label:"Seats Reporting",icon:D,colorClass:"bg-sage-200 text-sage-600 dark:bg-sage-800 dark:text-sage-300",getValue:t=>String(t.seatsReporting)},{key:"turnout",label:"Voter Turnout",icon:B,colorClass:"bg-red-100 text-red-600 dark:bg-red-900 dark:text-red-400",getValue:t=>p(t.turnoutPercent)}];function X({active:t,payload:r}){if(!t||!r||r.length===0)return null;const l=r[0].payload;return e.jsxs("div",{className:"rounded-xl bg-white dark:bg-olive-900 border border-sage-200 dark:border-sage-700 px-3 py-2 shadow-soft-lg text-sm",children:[e.jsx("p",{className:"font-semibold text-olive-800 dark:text-sage-100",children:l.name}),e.jsxs("p",{className:"text-olive-600 dark:text-sage-300",children:[g(l.value)," votes (",p(l.percent),")"]})]})}function Y({active:t,payload:r}){if(!t||!r||r.length===0)return null;const l=r[0].payload;return e.jsxs("div",{className:"rounded-xl bg-white dark:bg-olive-900 border border-sage-200 dark:border-sage-700 px-3 py-2 shadow-soft-lg text-sm",children:[e.jsx("p",{className:"font-semibold text-olive-800 dark:text-sage-100",children:l.name}),e.jsxs("p",{className:"text-olive-600 dark:text-sage-300",children:[g(l.totalVotes)," votes"]})]})}function re(){const{overview:t,lastUpdated:r,isLoading:l}=E(),n=x.useMemo(()=>{if(!t?.partyStandings)return[];const s=[...t.partyStandings].sort((i,h)=>h.totalVotes-i.totalVotes),a=s.slice(0,5),d=s.slice(5).reduce((i,h)=>i+h.totalVotes,0),v=a.map(i=>({name:i.abbreviation,value:i.totalVotes,percent:i.voteSharePercent,color:i.color}));if(d>0){const i=t.totalVotesCast||1;v.push({name:"Others",value:d,percent:Math.round(d/i*1e4)/100,color:"#9CA3AF"})}return v},[t]),o=x.useMemo(()=>t?.partyStandings?[...t.partyStandings].sort((s,a)=>a.totalVotes-s.totalVotes).map(s=>({name:s.abbreviation,totalVotes:s.totalVotes,color:s.color})):[],[t]),m=x.useMemo(()=>t?.partyStandings?[...t.partyStandings].sort((s,a)=>a.totalVotes-s.totalVotes).slice(0,4):[],[t]);return l&&!t?e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:Array.from({length:4}).map((s,a)=>e.jsx(T,{},a))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(c,{children:e.jsx(j,{className:"h-64 w-full rounded-xl"})}),e.jsx(c,{children:e.jsx(j,{className:"h-64 w-full rounded-xl"})})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:Array.from({length:4}).map((s,a)=>e.jsx(j,{className:"h-40 w-full rounded-2xl"},a))})]}):t?e.jsxs("div",{className:"space-y-8 animate-fade-in",children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:W.map((s,a)=>{const d=s.icon;return e.jsxs("div",{className:u("stat-card animate-slide-up",a===1&&"animate-delay-100",a===2&&"animate-delay-200",a===3&&"animate-delay-300"),children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-olive-500 dark:text-sage-400 mb-1",children:s.label}),e.jsx("p",{className:"font-display text-3xl font-bold text-olive-900 dark:text-sage-50 number-transition",children:s.getValue(t)})]}),e.jsx("div",{className:u("flex items-center justify-center w-10 h-10 rounded-xl",s.colorClass),children:e.jsx(d,{size:20})})]}),e.jsxs("div",{className:"flex items-center gap-1 mt-2 text-xs text-green-600 dark:text-green-400",children:[e.jsx(z,{size:12}),e.jsx("span",{children:"Live"})]})]},s.key)})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(c,{children:[e.jsx(f,{children:e.jsx(b,{children:"Vote Distribution"})}),e.jsxs(N,{children:[n.length>0?e.jsx(k,{width:"100%",height:280,children:e.jsxs(M,{children:[e.jsx(O,{data:n,cx:"50%",cy:"50%",innerRadius:60,outerRadius:110,paddingAngle:2,dataKey:"value",stroke:"none",children:n.map(s=>e.jsx(y,{fill:s.color},s.name))}),e.jsx(C,{content:e.jsx(X,{})})]})}):e.jsx("div",{className:"flex items-center justify-center h-64 text-olive-400 dark:text-sage-500",children:"No vote data available"}),e.jsx("div",{className:"flex flex-wrap justify-center gap-3 mt-4",children:n.map(s=>e.jsxs("div",{className:"flex items-center gap-1.5 text-xs",children:[e.jsx("span",{className:"w-3 h-3 rounded-full shrink-0",style:{backgroundColor:s.color}}),e.jsx("span",{className:"text-olive-600 dark:text-sage-300",children:s.name})]},s.name))})]})]}),e.jsxs(c,{children:[e.jsx(f,{children:e.jsx(b,{children:"Party Vote Comparison"})}),e.jsx(N,{children:o.length>0?e.jsx(k,{width:"100%",height:280,children:e.jsxs(U,{data:o,layout:"vertical",margin:{top:0,right:20,bottom:0,left:40},children:[e.jsx(I,{type:"number",hide:!0}),e.jsx(K,{type:"category",dataKey:"name",width:40,tick:{fontSize:12,fill:"#696752"}}),e.jsx(C,{content:e.jsx(Y,{})}),e.jsx(_,{dataKey:"totalVotes",radius:[0,6,6,0],barSize:20,children:o.map(s=>e.jsx(y,{fill:s.color},s.name))})]})}):e.jsx("div",{className:"flex items-center justify-center h-64 text-olive-400 dark:text-sage-500",children:"No vote data available"})})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-display text-xl font-semibold text-olive-900 dark:text-sage-100 mb-4",children:"Leading Parties"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:m.map((s,a)=>e.jsx(c,{className:u("animate-slide-up overflow-hidden",a===1&&"animate-delay-100",a===2&&"animate-delay-200",a===3&&"animate-delay-300"),padding:"none",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"w-1.5 shrink-0",style:{backgroundColor:s.color}}),e.jsxs("div",{className:"p-4 flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("h3",{className:"font-display font-semibold text-olive-900 dark:text-sage-100 truncate",children:s.name}),e.jsx(P,{size:"sm",color:s.color,children:s.abbreviation})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-olive-500 dark:text-sage-400 text-xs",children:"Seats Won"}),e.jsx("p",{className:"font-semibold text-olive-800 dark:text-sage-200",children:s.seatsWon})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-olive-500 dark:text-sage-400 text-xs",children:"Leading"}),e.jsx("p",{className:"font-semibold text-olive-800 dark:text-sage-200",children:s.seatsLeading})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-olive-500 dark:text-sage-400 text-xs",children:"Total Votes"}),e.jsx("p",{className:"font-semibold text-olive-800 dark:text-sage-200",children:g(s.totalVotes)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-olive-500 dark:text-sage-400 text-xs",children:"Vote Share"}),e.jsx("p",{className:"font-semibold text-olive-800 dark:text-sage-200",children:p(s.voteSharePercent)})]})]})]})]})},s.partyId))})]}),e.jsx("div",{className:"flex justify-center pt-2",children:e.jsx(R,{lastUpdated:r})})]}):null}export{re as default};
