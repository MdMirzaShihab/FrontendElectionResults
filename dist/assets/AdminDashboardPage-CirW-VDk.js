import{j as e}from"./index-C_gzxXLR.js";import{r as f}from"./vendor-react-D5zly3OG.js";import{u as g,a as p}from"./useAutoRefresh-C5B4cXPu.js";import{B as d}from"./Button-CcyT1Mks.js";import{C as i,a as o,b as m,c}from"./Card-Ce4z5HAh.js";import{B as j}from"./Badge-CX70jgsv.js";import{P as x}from"./ProgressBar-QGnkt7qF.js";import{a as l}from"./Skeleton-BlVrmxxX.js";import{c as u,f as v}from"./formatters-DXobJT5u.js";import{f as N,r as h,B as b,s as k,j as C}from"./vendor-icons-B72874lV.js";import"./vendor-charts-CASEHI2m.js";import"./vendor-state-CPk78qbZ.js";function y(){const{adminDashboard:a,isLoading:t,error:r,fetchAdminDashboard:s}=g(),n=f.useCallback(()=>s(),[s]);return p(n,{interval:6e4}),{dashboard:a,isLoading:t,error:r,refresh:n}}const w=[{key:"totalSeats",label:"Total Seats",icon:N,suffix:"/300"},{key:"seatsWithResults",label:"Seats Reporting",icon:h},{key:"totalCentres",label:"Total Centres",icon:b},{key:"centresReported",label:"Centres Reported",icon:h}];function R(a){return a>80?"#22c55e":a>=40?"#f59e0b":"#ef4444"}function A({label:a,value:t,suffix:r,icon:s}){return e.jsx(i,{variant:"default",padding:"md",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-olive-500 dark:text-sage-400",children:a}),e.jsxs("p",{className:"mt-1 text-2xl font-display font-bold text-olive-900 dark:text-sage-100",children:[v(t),r&&e.jsx("span",{className:"text-base font-normal text-olive-400 dark:text-sage-500",children:r})]})]}),e.jsx("div",{className:"w-10 h-10 rounded-xl bg-green-50 dark:bg-green-950 flex items-center justify-center",children:e.jsx(s,{size:20,className:"text-green-600 dark:text-green-400"})})]})})}function S(){return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:Array.from({length:4}).map((a,t)=>e.jsxs(i,{variant:"default",padding:"md",children:[e.jsx(l,{className:"h-4 w-24 mb-3 rounded-md"}),e.jsx(l,{className:"h-8 w-16 rounded-md"})]},t))}),e.jsxs(i,{variant:"default",padding:"md",children:[e.jsx(l,{className:"h-5 w-40 mb-4 rounded-md"}),e.jsx(l,{className:"h-4 w-full rounded-full"})]})]})}function W(){const{dashboard:a,isLoading:t,refresh:r}=y();return t&&!a?e.jsx(S,{}):a?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"font-display font-bold text-xl text-olive-900 dark:text-sage-100",children:"Dashboard"}),e.jsx(d,{variant:"outline",size:"sm",onClick:r,loading:t,children:"Refresh"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:w.map(s=>e.jsx(A,{label:s.label,value:a[s.key],suffix:s.suffix,icon:s.icon},s.key))}),e.jsx(i,{variant:"gradient",padding:"md",children:e.jsx(x,{value:a.overallPercent,max:100,label:"Overall Completion",showPercent:!0,size:"lg"})}),e.jsxs(i,{variant:"default",padding:"none",children:[e.jsx(o,{className:"px-5 pt-5",children:e.jsx(m,{children:"Division Progress"})}),e.jsx(c,{children:e.jsx("div",{className:"divide-y divide-sage-100 dark:divide-sage-800",children:a.divisionProgress.map(s=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 px-5 py-3",children:[e.jsx("span",{className:"text-sm font-medium text-olive-700 dark:text-sage-300 sm:w-32 shrink-0",children:s.name}),e.jsx("div",{className:"flex-1",children:e.jsx(x,{value:s.percent,max:100,size:"md",color:R(s.percent)})}),e.jsxs("span",{className:"text-sm font-medium text-olive-500 dark:text-sage-400 sm:w-20 text-right shrink-0",children:[s.reported,"/",s.total," (",s.percent,"%)"]})]},s.divisionId))})})]}),e.jsxs(i,{variant:"default",padding:"none",children:[e.jsx(o,{className:"px-5 pt-5",children:e.jsx(m,{children:"Recent Activity"})}),e.jsx(c,{className:"max-h-96 overflow-y-auto",children:a.recentActivity.length===0?e.jsx("p",{className:"px-5 pb-5 text-sm text-olive-400 dark:text-sage-500",children:"No recent activity"}):e.jsx("div",{className:"divide-y divide-sage-100 dark:divide-sage-800",children:a.recentActivity.map(s=>e.jsxs("div",{className:"flex items-start gap-3 px-5 py-3",children:[e.jsx("div",{className:"mt-0.5 w-8 h-8 rounded-lg bg-sage-100 dark:bg-sage-800 flex items-center justify-center shrink-0",children:e.jsx(k,{size:14,className:"text-olive-400 dark:text-sage-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx(j,{variant:"primary",size:"sm",children:s.adminName||s.adminEmail}),e.jsx("span",{className:"text-xs text-olive-400 dark:text-sage-500",children:u(s.timestamp)})]}),e.jsx("p",{className:"mt-1 text-sm text-olive-600 dark:text-sage-300 truncate",children:s.detail||s.action}),(s.seatName||s.seatId)&&e.jsxs("div",{className:"mt-1 flex items-center gap-1 text-xs text-olive-400 dark:text-sage-500",children:[e.jsx(C,{size:12}),e.jsxs("span",{children:[s.seatName||s.seatId,s.centreName&&` / ${s.centreName}`]})]})]})]},s.id))})})]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[e.jsx("p",{className:"text-olive-500 dark:text-sage-400",children:"Unable to load dashboard data."}),e.jsx(d,{variant:"outline",onClick:r,children:"Retry"})]})}export{W as default};
